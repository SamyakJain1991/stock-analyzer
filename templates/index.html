<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Stock Analyzer</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f9f9f9; }
        h1 { color: #333; }
        .card { background: #fff; padding: 20px; margin-top: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .alert { background:#fff3cd; border:1px solid #ffeeba; color:#856404; padding:15px; border-radius:8px; margin-bottom:20px; }
        .error { color: red; font-weight: bold; }
        select, input[type="text"], button {
            padding: 8px; margin: 5px; border-radius: 4px; border: 1px solid #ccc;
        }
        button { background: #007bff; color: #fff; border: none; cursor: pointer; }
        button:hover { background: #0056b3; }
    </style>
    <script>
        function clearDropdownOnSearch() {
            document.getElementById("tickerDropdown").value = "";
        }
    </script>
</head>
<body>
    <h1>üìä Stock Analyzer</h1>

    <!-- Professional Disclaimer -->
    <div class="alert">
        ‚ö†Ô∏è <strong>Disclaimer:</strong> The information and analysis provided on this platform are for educational and informational purposes only. 
        They do not constitute investment advice, financial guidance, or recommendations to buy or sell securities. 
        Users should conduct their own research or consult a qualified financial advisor before making any investment decisions.
    </div>

    <form method="POST" action="/analyze" onsubmit="clearDropdownOnSearch()">
        <!-- Dropdown -->
        <label for="tickerDropdown">Select Stock:</label>
        <select id="tickerDropdown" name="ticker">
            <option value="">--Select Stock--</option>
            {% for stock in stock_list %}
                <option value="{{ stock }}">{{ stock }}</option>
            {% endfor %}
        </select>

        <!-- Search box with autocomplete -->
        <label for="searchBox">Or Search:</label>
        <input type="text" id="searchBox" name="search" placeholder="Enter stock symbol..." list="stockSuggestions">

        <!-- Datalist for autocomplete -->
        <datalist id="stockSuggestions">
            {% for stock in stock_list %}
                <option value="{{ stock }}">
            {% endfor %}
        </datalist>

        <button type="submit">Analyze</button>
    </form>

    {% if analysis %}
        <div class="card">
            {% if analysis.error %}
                <p class="error">{{ analysis.error }}</p>
            {% else %}
                <h2>Analysis for {{ analysis.ticker }}</h2>
                <p><strong>Company:</strong> {{ analysis.Company }}</p>
                <p><strong>Sector:</strong> {{ analysis.Sector }}</p>
                <p>{{ analysis.Description }}</p>
                <p>{{ analysis.CurrentPrice }}</p>
                <p>{{ analysis.DayRange }}</p>
                <p>{{ analysis.Trend }}</p>
                <p>{{ analysis.Entry }}</p>
                <p>{{ analysis.Exit }}</p>
                <p>{{ analysis.StopLoss }}</p>
                <p><strong>Verdict:</strong> {{ analysis.Verdict }}</p>
            {% endif %}
        </div>
    {% endif %}
</body>
</html>